## (QA)常见问题

### 1. 出现一些异常情况，无法使用XiaoBuild导致编译任务无法进行时?

<span style="background-color: red;">1.如果情况很紧急</span> 建议直接卸载！

如果情况一般，可以通过右下角的 托盘程序 -> 代理设置

![OpenAgentSettings](./documents/resource/open_agent_settings.png)

<span style="background-color: yellow;">2.全局操作代理设置</span>  关闭UBAC系统的使用(这是全局操作，所有引擎都会影响)
![ToggleUBAC](./documents/resource/toggle_ubac.png)

<span style="background-color: blue;">3.特定引擎版本设置</span> 只影响特定引擎版本 
![UBACEngine](./documents/resource/ubac_engine_settings.png)


---

### 2. 通过构建进度查看工具会发现，有时代理会超过系统设置的最大同时能运行的进程数?

这种情况是UBA底层调度有bug，看后续是否有时间去解决(短时间内超过限制，不会机器的运行有太大的影响)

---

### 3. 备份机器

在网络服务已经运行注册安装之后，选择一台网络稳定，存储空间足够的机器按照普通安装的顺序，只是在安装类型时选择`自定义类型`，
然后在其中的选项中选择`备份服务器`类型

![BackupCoordi](./documents/resource/BackupCoordi.png)

---

### 4. 命令行安装

例如在Windows Server 上可能是没有独立显卡，只有集成显卡，UE的Slate程序是没法显示的，再或者只能通过终端进行操作情形下 可以采用命令行方式运行安装程序。 步骤如下:

```shell
cd $XIAO_HOME%/Binaries/Win64
./XiaoInstallConsole.exe -install -install_setting=C:/ProgramData/Epic/install_setting.json -ppid=48208 -LOG=XiaoInstallConsole.log
```

-install 代表是安装 

-install_setting 指向的是一个安装配置文件的url

-ppid 指向的父进程ID 

-LOG 指定日志文件的名称


install_setting.json 文件中的内容如下:
```json 
{
    "Localization": "zh-CN",    
    "SetupUpType": 0,
    "InstallType": 7,
    "bEnableAutoTray": true,    
    "bSilentInstall": false,
    "bHasLicense": false,
    "LicenseKey": "",
    "CoordiListenPort": 37000,
    "UIListenPort": 37060,
    "PerfTransport": 37080,
    "AgentListenPort": 1345,
    "SchedulerServerPort": 1346,
    "LicenseListenPort": 37020,
    "CacheListenPort": 37040,
    "bAutoOpenFirewall": true,
    "InstallFolder": "C:/Program Files/XiaoBuild/Engine",   // 安装的目录中Engine目录所在位置
    "CacheFolder": "C:/ProgramData/XiaoBuild/Cache",        // 系统运行中缓存存放位置
    "bAddEnvironment": true,
    "bHasSSL": true,
    "CertFile": "",
    "KeyFile": "",
    "Username": "admin",    // 调度器类型需要填写,用于系统管理登录 代理类型不用填
    "Domain": ".",
    "Password": "A1234567", // 调度器类型需要填写/ 代理类型不用填
    "CoordiIp": "localhost",// 调度器类型默认"localhost" / 代理类型则填调度器安装机器所在IP地址
    "CoordiPort": 37000,    // 同上
    "HelpListenPort": 1345,
    "FileCache": 4096,
    "bInstallIDE": true,
    "EngineFolders": [],
    "EngineTypes": [],
    "EngineVersions": []
}
```
---

### 5. 登录账户和密码忘记了

可以去调度器所在机器上，查看C:/ProgramData/Epic/install_setting.json文件
里面有两个字段 "Username" 和 "Password"

---

### 6. 在安装XiaoBuild使用一段时间后硬盘空间不够了

XiaoBuild在运行的过程中会有文件进行同步，日积月累就会留下很多缓存文件

**解决方式**: 通过右下角的托盘程序可以清理一下缓存文件，缓存清理->清理调度器Cas

如何下图所示操作:

![ClearCache](./documents/resource/clear_cache.jpg)

---

### 7. XiaoBuild调度管理面板上有部分代理显示处于掉线状态，但是经过检查却是对应机器上的代理程序的运行是正常的

**解决方式** 打开调度管理程序，通过面板上的按钮来重置对应的代理状态

如下图所示操作:

![ResetAgentState](./documents/resource/reset_agent_state.png)

---

### 8. 通过远程方式操作被远程的电脑，当运行XiaoBuild相关的软件，发现没有显示界面

**解决方式** 通常是被远程的电脑没有插上显示器导致的，具体原因还有待查证

---

### 9. 在发起协助编译的情况下，发现代理没有进行协助编译

当您发起协助编译（Distributed Compilation）时，如果发现有代理机器没有参与协助，通常可以从以下几个方面排查：

🛑 代理机器的配置或状态问题

1.调度设置限制： 未参与协助的代理机器在调度管理中被明确设置为“不作为”协助者。

2.连接数量超限： 当前已连接的代理数量已经超过发起编译的代理所能建立的最大代理连接数。

3.最低系统资源未达标： 代理机器的系统资源不满足作为协助者的最低要求。例如：

    1)空闲 CPU 使用率未达到预设的最低值。
    2)可用内存（RAM）低于系统要求的最小 GB 数。
    3)剩余硬盘空间未达到最低保证值。

    提示：通常，未达标的资源指标背景色会变红。

    代理版本不兼容： 未参与协助的代理版本与发起协助的代理版本差距过大，导致无法兼容。

🌐 网络或分组隔离问题

4.分组逻辑隔离： 发起协助的代理机器与未参与协助的代理机器不在同一个逻辑分组中。

5.防火墙端口阻塞： 代理之间进行通信的端口被防火墙阻止。

🔌 代理服务的运行状态问题

6.代理处于离线状态： 未参与协助的代理机器当前处于掉线状态，可能原因包括：

    1)对应的机器停止运行了 XiaoAgentService 服务。
    2)代理所在的计算机未运行（关机或休眠）。
    3)网络连接不可达（例如网线断开或IP配置错误）。

7.并发任务量限制（非必要占用）： 
    当前系统允许并发运行的最大任务数量，已经低于包含本机和所有已连接协助代理的总核心数量，因此系统可能为了避免不必要的资源占用，没有分配更多代理。
